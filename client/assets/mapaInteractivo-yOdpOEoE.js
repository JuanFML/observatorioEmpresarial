import{w as je}from"./with-props-D6JVR6rt.js";import{r as l,l as y,t as Re,v as L,w as He}from"./chunk-GNGMS2XR-CXDedMy8.js";import{r as Ue}from"./index-BmAXdj_o.js";import{N as Be}from"./NavBar-q7FAYSjc.js";import{a as ae,g as ie,u as le,s as ue,c as ce,d as de,e as fe,m as $e,j as Ge}from"./Portal-DAHUK4v-.js";import{u as N}from"./MenuItem-DizM1Xn0.js";import{u as Ze,f as qe,O as Ve,F as Je,I as Ke,a as We,S as Ye,b as Qe}from"./Select-DSR4TP5o.js";import"./createSvgIcon-2CpfeZ1c.js";function Xe(t){return ie("MuiFormHelperText",t)}const ne=ae("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]);var oe;const et=t=>{const{classes:e,contained:n,size:o,disabled:r,error:s,filled:i,focused:a,required:c}=t,d={root:["root",r&&"disabled",s&&"error",o&&`size${de(o)}`,n&&"contained",a&&"focused",i&&"filled",c&&"required"]};return fe(d,Xe,e)},tt=ue("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.size&&e[`size${de(n.size)}`],n.contained&&e.contained,n.filled&&e.filled]}})($e(({theme:t})=>({color:(t.vars||t).palette.text.secondary,...t.typography.caption,textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${ne.disabled}`]:{color:(t.vars||t).palette.text.disabled},[`&.${ne.error}`]:{color:(t.vars||t).palette.error.main},variants:[{props:{size:"small"},style:{marginTop:4}},{props:({ownerState:e})=>e.contained,style:{marginLeft:14,marginRight:14}}]}))),nt=l.forwardRef(function(e,n){const o=le({props:e,name:"MuiFormHelperText"}),{children:r,className:s,component:i="p",disabled:a,error:c,filled:d,focused:f,margin:p,required:g,variant:m,...u}=o,h=Ze(),b=qe({props:o,muiFormControl:h,states:["variant","size","disabled","error","filled","focused","required"]}),v={...o,component:i,contained:b.variant==="filled"||b.variant==="outlined",variant:b.variant,size:b.size,disabled:b.disabled,error:b.error,filled:b.filled,focused:b.focused,required:b.required};delete v.ownerState;const I=et(v);return y.jsx(tt,{as:i,className:ce(I.root,s),ref:n,...u,ownerState:v,children:r===" "?oe||(oe=y.jsx("span",{className:"notranslate","aria-hidden":!0,children:"​"})):r})});function ot(t){return ie("MuiTextField",t)}ae("MuiTextField",["root"]);const rt={standard:Ke,filled:Je,outlined:Ve},st=t=>{const{classes:e}=t;return fe({root:["root"]},ot,e)},at=ue(Qe,{name:"MuiTextField",slot:"Root"})({}),$=l.forwardRef(function(e,n){const o=le({props:e,name:"MuiTextField"}),{autoComplete:r,autoFocus:s=!1,children:i,className:a,color:c="primary",defaultValue:d,disabled:f=!1,error:p=!1,FormHelperTextProps:g,fullWidth:m=!1,helperText:u,id:h,InputLabelProps:b,inputProps:v,InputProps:I,inputRef:w,label:E,maxRows:x,minRows:S,multiline:M=!1,name:A,onBlur:T,onChange:C,onFocus:z,placeholder:j,required:Y=!1,rows:Le,select:V=!1,SelectProps:J,slots:Q={},slotProps:Ce={},type:Ee,value:X,variant:B="outlined",...xe}=o,_={...o,autoFocus:s,color:c,disabled:f,error:p,fullWidth:m,multiline:M,required:Y,select:V,variant:B},Se=st(_),F=Ge(h),K=u&&F?`${F}-helper-text`:void 0,ee=E&&F?`${F}-label`:void 0,Ie=rt[B],k={slots:Q,slotProps:{input:I,inputLabel:b,htmlInput:v,formHelperText:g,select:J,...Ce}},R={},W=k.slotProps.inputLabel;B==="outlined"&&(W&&typeof W.shrink<"u"&&(R.notched=W.shrink),R.label=E),V&&((!J||!J.native)&&(R.id=void 0),R["aria-describedby"]=void 0);const[Me,we]=N("root",{elementType:at,shouldForwardComponentProp:!0,externalForwardedProps:{...k,...xe},ownerState:_,className:ce(Se.root,a),ref:n,additionalProps:{disabled:f,error:p,fullWidth:m,required:Y,color:c,variant:B}}),[Pe,Te]=N("input",{elementType:Ie,externalForwardedProps:k,additionalProps:R,ownerState:_}),[Oe,Ae]=N("inputLabel",{elementType:We,externalForwardedProps:k,ownerState:_}),[_e,Fe]=N("htmlInput",{elementType:"input",externalForwardedProps:k,ownerState:_}),[ke,Ne]=N("formHelperText",{elementType:nt,externalForwardedProps:k,ownerState:_}),[De,ze]=N("select",{elementType:Ye,externalForwardedProps:k,ownerState:_}),te=y.jsx(Pe,{"aria-describedby":K,autoComplete:r,autoFocus:s,defaultValue:d,fullWidth:m,multiline:M,name:A,rows:Le,maxRows:x,minRows:S,type:Ee,value:X,id:F,inputRef:w,onBlur:T,onChange:C,onFocus:z,placeholder:j,inputProps:Fe,slots:{input:Q.htmlInput?_e:void 0},...Te});return y.jsxs(Me,{...we,children:[E!=null&&E!==""&&y.jsx(Oe,{htmlFor:F,id:ee,...Ae,children:E}),V?y.jsx(De,{"aria-describedby":K,id:F,labelId:ee,value:X,input:te,...ze,children:i}):te,u&&y.jsx(ke,{id:K,...Ne,children:u})]})});var it=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var o,r,s;if(Array.isArray(e)){if(o=e.length,o!=n.length)return!1;for(r=o;r--!==0;)if(!t(e[r],n[r]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(s=Object.keys(e),o=s.length,o!==Object.keys(n).length)return!1;for(r=o;r--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[r]))return!1;for(r=o;r--!==0;){var i=s[r];if(!t(e[i],n[i]))return!1}return!0}return e!==e&&n!==n};const lt=Re(it);function P(){return P=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)({}).hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},P.apply(null,arguments)}function D(t,e){if(t==null)return{};var n={};for(var o in t)if({}.hasOwnProperty.call(t,o)){if(e.indexOf(o)!==-1)continue;n[o]=t[o]}return n}function ut(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var o=n.call(t,e);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function ct(t){var e=ut(t,"string");return typeof e=="symbol"?e:e+""}const O={NOT_LOADED:"NOT_LOADED",LOADING:"LOADING",LOADED:"LOADED",FAILED:"FAILED",AUTH_FAILURE:"AUTH_FAILURE"},dt="https://maps.googleapis.com/maps/api/js";class H{static async load(e,n){var o;const r=e.libraries?e.libraries.split(","):[],s=this.serializeParams(e);this.listeners.push(n),(o=window.google)!=null&&(o=o.maps)!=null&&o.importLibrary?(this.serializedApiParams||(this.loadingStatus=O.LOADED),this.notifyLoadingStatusListeners()):(this.serializedApiParams=s,this.initImportLibrary(e)),this.serializedApiParams&&this.serializedApiParams!==s&&console.warn("[google-maps-api-loader] The maps API has already been loaded with different parameters and will not be loaded again. Refresh the page for new values to have effect.");const i=["maps",...r];await Promise.all(i.map(a=>google.maps.importLibrary(a)))}static serializeParams(e){return[e.v,e.key,e.language,e.region,e.authReferrerPolicy,e.solutionChannel].join("/")}static initImportLibrary(e){if(window.google||(window.google={}),window.google.maps||(window.google.maps={}),window.google.maps.importLibrary){console.error("[google-maps-api-loader-internal]: initImportLibrary must only be called once");return}let n=null;const o=()=>n||(n=new Promise((r,s)=>{var i;const a=document.createElement("script"),c=new URLSearchParams;for(const[d,f]of Object.entries(e)){const p=d.replace(/[A-Z]/g,g=>"_"+g[0].toLowerCase());c.set(p,String(f))}c.set("loading","async"),c.set("callback","__googleMapsCallback__"),a.async=!0,a.src=dt+"?"+c.toString(),a.nonce=((i=document.querySelector("script[nonce]"))==null?void 0:i.nonce)||"",a.onerror=()=>{this.loadingStatus=O.FAILED,this.notifyLoadingStatusListeners(),s(new Error("The Google Maps JavaScript API could not load."))},window.__googleMapsCallback__=()=>{this.loadingStatus=O.LOADED,this.notifyLoadingStatusListeners(),r()},window.gm_authFailure=()=>{this.loadingStatus=O.AUTH_FAILURE,this.notifyLoadingStatusListeners()},this.loadingStatus=O.LOADING,this.notifyLoadingStatusListeners(),document.head.append(a)}),n);google.maps.importLibrary=r=>o().then(()=>google.maps.importLibrary(r))}static notifyLoadingStatusListeners(){for(const e of this.listeners)e(this.loadingStatus)}}H.loadingStatus=O.NOT_LOADED;H.serializedApiParams=void 0;H.listeners=[];const ft=["onLoad","onError","apiKey","version","libraries"],mt=["children"],pt="GMP_visgl_rgmlibrary_v1_default",U=L.createContext(null);function gt(){const[t,e]=l.useState({});return{mapInstances:t,addMapInstance:(s,i="default")=>{e(a=>P({},a,{[i]:s}))},removeMapInstance:(s="default")=>{e(i=>D(i,[s].map(ct)))},clearMapInstances:()=>{e({})}}}function ht(t){const{onLoad:e,onError:n,apiKey:o,version:r,libraries:s=[]}=t,i=D(t,ft),[a,c]=l.useState(H.loadingStatus),[d,f]=l.useReducer((u,h)=>u[h.name]?u:P({},u,{[h.name]:h.value}),{}),p=l.useMemo(()=>s==null?void 0:s.join(","),[s]),g=l.useMemo(()=>JSON.stringify(P({apiKey:o,version:r},i)),[o,r,i]),m=l.useCallback(async u=>{var h;if(d[u])return d[u];if(!((h=google)!=null&&(h=h.maps)!=null&&h.importLibrary))throw new Error("[api-provider-internal] importLibrary was called before google.maps.importLibrary was defined.");const b=await window.google.maps.importLibrary(u);return f({name:u,value:b}),b},[d]);return l.useEffect(()=>{(async()=>{try{const u=P({key:o},i);r&&(u.v=r),(p==null?void 0:p.length)>0&&(u.libraries=p),(u.channel===void 0||u.channel<0||u.channel>999)&&delete u.channel,u.solutionChannel===void 0?u.solutionChannel=pt:u.solutionChannel===""&&delete u.solutionChannel,await H.load(u,h=>c(h));for(const h of["core","maps",...s])await m(h);e&&e()}catch(u){n?n(u):console.error("<ApiProvider> failed to load the Google Maps JavaScript API",u)}})()},[o,p,g]),{status:a,loadedLibraries:d,importLibrary:m}}const vt=t=>{const{children:e}=t,n=D(t,mt),{mapInstances:o,addMapInstance:r,removeMapInstance:s,clearMapInstances:i}=gt(),{status:a,loadedLibraries:c,importLibrary:d}=ht(n),f=l.useMemo(()=>({mapInstances:o,addMapInstance:r,removeMapInstance:s,clearMapInstances:i,status:a,loadedLibraries:c,importLibrary:d}),[o,r,s,i,a,c,d]);return L.createElement(U.Provider,{value:f},e)};function bt(t,e){for(const n of Et){const o=e[n],r=me[n];l.useEffect(()=>{if(!t||!o)return;const s=google.maps.event.addListener(t,r,i=>{o(yt(r,t,i))});return()=>s.remove()},[t,r,o])}}function yt(t,e,n){const o={type:t,map:e,detail:{},stoppable:!1,stop:()=>{}};if(Lt.includes(t)){const s=o,i=e.getCenter(),a=e.getZoom(),c=e.getHeading()||0,d=e.getTilt()||0,f=e.getBounds();return(!i||!f||!Number.isFinite(a))&&console.warn("[createEvent] at least one of the values from the map returned undefined. This is not expected to happen. Please report an issue at https://github.com/visgl/react-google-maps/issues/new"),s.detail={center:(i==null?void 0:i.toJSON())||{lat:0,lng:0},zoom:a||0,heading:c,tilt:d,bounds:(f==null?void 0:f.toJSON())||{north:90,east:180,south:-90,west:-180}},s}else if(Ct.includes(t)){var r;if(!n)throw new Error("[createEvent] mouse events must provide a srcEvent");const s=o;return s.domEvent=n.domEvent,s.stoppable=!0,s.stop=()=>n.stop(),s.detail={latLng:((r=n.latLng)==null?void 0:r.toJSON())||null,placeId:n.placeId},s}return o}const me={onBoundsChanged:"bounds_changed",onCenterChanged:"center_changed",onClick:"click",onContextmenu:"contextmenu",onDblclick:"dblclick",onDrag:"drag",onDragend:"dragend",onDragstart:"dragstart",onHeadingChanged:"heading_changed",onIdle:"idle",onIsFractionalZoomEnabledChanged:"isfractionalzoomenabled_changed",onMapCapabilitiesChanged:"mapcapabilities_changed",onMapTypeIdChanged:"maptypeid_changed",onMousemove:"mousemove",onMouseout:"mouseout",onMouseover:"mouseover",onProjectionChanged:"projection_changed",onRenderingTypeChanged:"renderingtype_changed",onTilesLoaded:"tilesloaded",onTiltChanged:"tilt_changed",onZoomChanged:"zoom_changed",onCameraChanged:"bounds_changed"},Lt=["bounds_changed","center_changed","heading_changed","tilt_changed","zoom_changed"],Ct=["click","contextmenu","dblclick","mousemove","mouseout","mouseover"],Et=Object.keys(me);function xt(t,e){const n=l.useRef(void 0);(!n.current||!lt(e,n.current))&&(n.current=e),l.useEffect(t,n.current)}const St=new Set(["backgroundColor","clickableIcons","controlSize","disableDefaultUI","disableDoubleClickZoom","draggable","draggableCursor","draggingCursor","fullscreenControl","fullscreenControlOptions","gestureHandling","headingInteractionEnabled","isFractionalZoomEnabled","keyboardShortcuts","mapTypeControl","mapTypeControlOptions","mapTypeId","maxZoom","minZoom","noClear","panControl","panControlOptions","restriction","rotateControl","rotateControlOptions","scaleControl","scaleControlOptions","scrollwheel","streetView","streetViewControl","streetViewControlOptions","styles","tiltInteractionEnabled","zoomControl","zoomControlOptions"]);function It(t,e){const n={},o=Object.keys(e);for(const r of o)St.has(r)&&(n[r]=e[r]);xt(()=>{t&&t.setOptions(n)},[n])}function pe(){var t;return((t=l.useContext(U))==null?void 0:t.status)||O.NOT_LOADED}function Mt(t,e){const{viewport:n,viewState:o}=e,r=!!n;return l.useLayoutEffect(()=>{if(!t||!o)return;const{latitude:s,longitude:i,bearing:a,pitch:c,zoom:d}=o;t.moveCamera({center:{lat:s,lng:i},heading:a,tilt:c,zoom:d+1})},[t,o]),r}function wt(t){return!t||typeof t!="object"||!("lat"in t&&"lng"in t)?!1:Number.isFinite(t.lat)&&Number.isFinite(t.lng)}function ge(t){return wt(t)?t:t.toJSON()}function Pt(t,e,n){const o=n.center?ge(n.center):null;let r=null,s=null;o&&Number.isFinite(o.lat)&&Number.isFinite(o.lng)&&(r=o.lat,s=o.lng);const i=Number.isFinite(n.zoom)?n.zoom:null,a=Number.isFinite(n.heading)?n.heading:null,c=Number.isFinite(n.tilt)?n.tilt:null;l.useLayoutEffect(()=>{if(!t)return;const d={};let f=!1;r!==null&&s!==null&&(e.current.center.lat!==r||e.current.center.lng!==s)&&(d.center={lat:r,lng:s},f=!0),i!==null&&e.current.zoom!==i&&(d.zoom=i,f=!0),a!==null&&e.current.heading!==a&&(d.heading=a,f=!0),c!==null&&e.current.tilt!==c&&(d.tilt=c,f=!0),f&&t.moveCamera(d)})}const Tt=()=>{const t={position:"absolute",top:0,left:0,bottom:0,right:0,zIndex:999,display:"flex",flexFlow:"column nowrap",textAlign:"center",justifyContent:"center",fontSize:".8rem",color:"rgba(0,0,0,0.6)",background:"#dddddd",padding:"1rem 1.5rem"};return L.createElement("div",{style:t},L.createElement("h2",null,"Error: AuthFailure"),L.createElement("p",null,"A problem with your API key prevents the map from rendering correctly. Please make sure the value of the ",L.createElement("code",null,"APIProvider.apiKey")," prop is correct. Check the error-message in the console for further details."))};function Ot(){const[t,e]=l.useState(null),n=l.useCallback(o=>e(o),[e]);return[t,n]}function he(){return pe()===O.LOADED}function At(){const[,t]=l.useReducer(e=>e+1,0);return t}function _t(t,e){const n=t.getCenter(),o=t.getZoom(),r=t.getHeading()||0,s=t.getTilt()||0,i=t.getBounds();(!n||!i||!Number.isFinite(o))&&console.warn("[useTrackedCameraState] at least one of the values from the map returned undefined. This is not expected to happen. Please report an issue at https://github.com/visgl/react-google-maps/issues/new"),Object.assign(e.current,{center:(n==null?void 0:n.toJSON())||{lat:0,lng:0},zoom:o||0,heading:r,tilt:s})}function Ft(t){const e=At(),n=l.useRef({center:{lat:0,lng:0},heading:0,tilt:0,zoom:0});return l.useEffect(()=>{if(!t)return;const o=google.maps.event.addListener(t,"bounds_changed",()=>{_t(t,n),e()});return()=>o.remove()},[t,e]),n}const kt=["id","defaultBounds","defaultCenter","defaultZoom","defaultHeading","defaultTilt","reuseMaps","renderingType","colorScheme"],Nt=["padding"];class q{static has(e){return this.entries[e]&&this.entries[e].length>0}static pop(e){return this.entries[e]&&this.entries[e].pop()||null}static push(e,n){this.entries[e]||(this.entries[e]=[]),this.entries[e].push(n)}}q.entries={};function Dt(t,e){const n=he(),[o,r]=l.useState(null),[s,i]=Ot(),a=Ft(o),{id:c,defaultBounds:d,defaultCenter:f,defaultZoom:p,defaultHeading:g,defaultTilt:m,reuseMaps:u,renderingType:h,colorScheme:b}=t,v=D(t,kt),I=t.zoom!==void 0||t.defaultZoom!==void 0,w=t.center!==void 0||t.defaultCenter!==void 0;!d&&(!I||!w)&&console.warn("<Map> component is missing configuration. You have to provide zoom and center (via the `zoom`/`defaultZoom` and `center`/`defaultCenter` props) or specify the region to show using `defaultBounds`. See https://visgl.github.io/react-google-maps/docs/api-reference/components/map#required"),!v.center&&f&&(v.center=f),!v.zoom&&Number.isFinite(p)&&(v.zoom=p),!v.heading&&Number.isFinite(g)&&(v.heading=g),!v.tilt&&Number.isFinite(m)&&(v.tilt=m);for(const x of Object.keys(v))v[x]===void 0&&delete v[x];const E=l.useRef(void 0);return l.useEffect(()=>{if(!s||!n)return;const{addMapInstance:x,removeMapInstance:S}=e,{mapId:M}=t,A=`${M||"default"}:${h||"default"}:${b||"LIGHT"}`;let T,C;if(u&&q.has(A)?(C=q.pop(A),T=C.getDiv(),s.appendChild(T),C.setOptions(v),setTimeout(()=>C.setCenter(C.getCenter()),0)):(T=document.createElement("div"),T.style.height="100%",s.appendChild(T),C=new google.maps.Map(T,P({},v,h?{renderingType:h}:{},b?{colorScheme:b}:{}))),r(C),x(C,c),d){const{padding:z}=d,j=D(d,Nt);C.fitBounds(j,z)}else(!I||!w)&&C.fitBounds({east:180,west:-180,south:-90,north:90});if(E.current){const{mapId:z,cameraState:j}=E.current;z!==M&&C.setOptions(j)}return()=>{E.current={mapId:M,cameraState:a.current},T.remove(),u?q.push(A,C):google.maps.event.clearInstanceListeners(C),r(null),S(c)}},[s,n,c,t.mapId,t.renderingType,t.colorScheme]),[o,i,a]}const ve=L.createContext(null),be=t=>{const{children:e,id:n,className:o,style:r}=t,s=l.useContext(U),i=pe();if(!s)throw new Error("<Map> can only be used inside an <ApiProvider> component.");const[a,c,d]=Dt(t,s);Pt(a,d,t),bt(a,t),It(a,t);const f=Mt(a,t),p=!!t.controlled;l.useEffect(()=>{if(a)return f&&a.setOptions({disableDefaultUI:!0}),(f||p)&&a.setOptions({gestureHandling:"none",keyboardShortcuts:!1}),()=>{a.setOptions({gestureHandling:t.gestureHandling,keyboardShortcuts:t.keyboardShortcuts})}},[a,f,p,t.gestureHandling,t.keyboardShortcuts]);const g=t.center?ge(t.center):null;let m=null,u=null;g&&Number.isFinite(g.lat)&&Number.isFinite(g.lng)&&(m=g.lat,u=g.lng);const h=l.useMemo(()=>{var I,w,E,x,S;return{center:{lat:(I=m)!=null?I:0,lng:(w=u)!=null?w:0},zoom:(E=t.zoom)!=null?E:0,heading:(x=t.heading)!=null?x:0,tilt:(S=t.tilt)!=null?S:0}},[m,u,t.zoom,t.heading,t.tilt]);l.useLayoutEffect(()=>{if(!a||!p)return;a.moveCamera(h);const I=a.addListener("bounds_changed",()=>{a.moveCamera(h)});return()=>I.remove()},[a,p,h]);const b=l.useMemo(()=>P({width:"100%",height:"100%",position:"relative",zIndex:f?-1:0},r),[r,f]),v=l.useMemo(()=>({map:a}),[a]);return i===O.AUTH_FAILURE?L.createElement("div",{style:P({position:"relative"},o?{}:b),className:o},L.createElement(Tt,null)):L.createElement("div",P({ref:c,"data-testid":"map",style:o?void 0:b,className:o},n?{id:n}:{}),a?L.createElement(ve.Provider,{value:v},e):null)};be.deckGLViewProps=!0;const re=new Set;function zt(...t){const e=JSON.stringify(t);re.has(e)||(re.add(e),console.error(...t))}const ye=(t=null)=>{const e=l.useContext(U),{map:n}=l.useContext(ve)||{};if(e===null)return zt("useMap(): failed to retrieve APIProviderContext. Make sure that the <APIProvider> component exists and that the component you are calling `useMap()` from is a sibling of the <APIProvider>."),null;const{mapInstances:o}=e;return t!==null?o[t]||null:n||o.default||null};function jt(t){const e=he(),n=l.useContext(U);return l.useEffect(()=>{!e||!n||n.importLibrary(t)},[e,n,t]),(n==null?void 0:n.loadedLibraries[t])||null}function G(t,e,n){l.useEffect(()=>{if(!t||!e||!n)return;const o=google.maps.event.addListener(t,e,n);return()=>o.remove()},[t,e,n])}function Z(t,e,n){l.useEffect(()=>{t&&(t[e]=n)},[t,e,n])}function se(t,e,n){l.useEffect(()=>{if(!(!t||!e||!n))return t.addEventListener(e,n),()=>t.removeEventListener(e,n)},[t,e,n])}function Rt(t){return t.nodeType===Node.ELEMENT_NODE}const Ht=L.createContext(null),Ut={BOTTOM:["50%","100%"]},Bt=({children:t,styles:e,className:n,anchorPoint:o})=>{const[r,s]=o??Ut.BOTTOM;let i=`-${r}`,a=`-${s}`;r.trimStart().startsWith("-")&&(i=r.substring(1)),s.trimStart().startsWith("-")&&(a=s.substring(1));const c=`translate(50%, 100%) translate(${i}, ${a})`;return L.createElement("div",{style:{transform:c}},L.createElement("div",{className:n,style:e},t))};function $t(t){const[e,n]=l.useState(null),[o,r]=l.useState(null),s=ye(),i=jt("marker"),{children:a,onClick:c,className:d,onMouseEnter:f,onMouseLeave:p,onDrag:g,onDragStart:m,onDragEnd:u,collisionBehavior:h,clickable:b,draggable:v,position:I,title:w,zIndex:E}=t,x=l.Children.count(a);return l.useEffect(()=>{if(!s||!i)return;const S=new i.AdvancedMarkerElement;S.map=s,n(S);let M=null;return x>0&&(M=document.createElement("div"),M.isCustomMarker=!0,S.content=M,r(M)),()=>{var A;S.map=null,(A=M)==null||A.remove(),n(null),r(null)}},[s,i,x]),l.useEffect(()=>{!e||!e.content||x>0||(e.content.className=d||"")},[e,d,x]),Z(e,"position",I),Z(e,"title",w??""),Z(e,"zIndex",E),Z(e,"collisionBehavior",h),l.useEffect(()=>{e&&(v!==void 0?e.gmpDraggable=v:g||m||u?e.gmpDraggable=!0:e.gmpDraggable=!1)},[e,v,g,u,m]),l.useEffect(()=>{if(!e)return;const S=b!==void 0||!!c||!!f||!!p;e.gmpClickable=S,S&&e!=null&&e.content&&Rt(e.content)&&(e.content.style.pointerEvents="none",e.content.firstElementChild&&(e.content.firstElementChild.style.pointerEvents="all"))},[e,b,c,f,p]),G(e,"click",c),G(e,"drag",g),G(e,"dragstart",m),G(e,"dragend",u),se(e==null?void 0:e.element,"mouseenter",f),se(e==null?void 0:e.element,"mouseleave",p),[e,o]}const Gt=l.forwardRef((t,e)=>{const{children:n,style:o,className:r,anchorPoint:s}=t,[i,a]=$t(t),c=l.useMemo(()=>i?{marker:i}:null,[i]);return l.useImperativeHandle(e,()=>i,[i]),a?L.createElement(Ht.Provider,{value:c},Ue.createPortal(L.createElement(Bt,{anchorPoint:s,styles:o,className:r},n),a)):null}),Zt=["onClick","onDrag","onDragStart","onDragEnd","onMouseOver","onMouseOut"];function qt(t){const[e,n]=l.useState(null),o=ye(),{onClick:r,onDrag:s,onDragStart:i,onDragEnd:a,onMouseOver:c,onMouseOut:d}=t,f=D(t,Zt),{position:p,draggable:g}=f;return l.useEffect(()=>{if(!o){o===void 0&&console.error("<Marker> has to be inside a Map component.");return}const m=new google.maps.Marker(f);return m.setMap(o),n(m),()=>{m.setMap(null),n(null)}},[o]),l.useEffect(()=>{if(!e)return;const m=e,u=google.maps.event;return r&&u.addListener(m,"click",r),s&&u.addListener(m,"drag",s),i&&u.addListener(m,"dragstart",i),a&&u.addListener(m,"dragend",a),c&&u.addListener(m,"mouseover",c),d&&u.addListener(m,"mouseout",d),e.setDraggable(!!g),()=>{u.clearInstanceListeners(m)}},[e,g,r,s,i,a,c,d]),l.useEffect(()=>{e&&f&&e.setOptions(f)},[e,f]),l.useEffect(()=>{g||!p||!e||e.setPosition(p)},[g,p,e]),e}l.forwardRef((t,e)=>{const n=qt(t);return l.useImperativeHandle(e,()=>n,[n]),L.createElement(L.Fragment,null)});function Vt({API_KEY:t,actionData:e}){const[n,o]=l.useState(),[r,s]=l.useState(),[i,a]=l.useState(25.5445),[c,d]=l.useState(-103.4477),f={lat:23.8771,lng:-102.3788};return y.jsxs(y.Fragment,{children:[y.jsx(Be,{}),y.jsxs("div",{children:["Latitud: ",n]}),y.jsxs("div",{children:["Longitud: ",r]}),y.jsxs(He,{method:"post",className:"flex items-center",children:[y.jsx($,{id:"condicion",name:"condicion",label:"Condición",variant:"outlined",defaultValue:"restaurante"}),y.jsx($,{id:"latitud",name:"latitud",label:"Latitud",variant:"outlined",value:i}),y.jsx($,{id:"longitud",name:"longitud",label:"Longitud",variant:"outlined",value:c}),y.jsx($,{id:"metros",name:"metros",label:"Metros",variant:"outlined",defaultValue:300}),y.jsx("button",{type:"submit",className:"py-3 px-2 text-blue-600 rounded-md bg-white  cursor-pointer hover:bg-blue-700 hover:transform hover:text-white hover:duration-300",children:y.jsx("div",{className:" text-center text-lg",children:"Buscar"})})]}),y.jsx(vt,{apiKey:t,language:"es",children:y.jsx(be,{style:{width:"100vw",height:"85vh"},defaultZoom:6,gestureHandling:"greedy",disableDefaultUI:!0,defaultCenter:f,mapId:"MAPA_OBERSVATORIO",onMousemove:p=>{var g,m;o((g=p.detail.latLng)==null?void 0:g.lat),s((m=p.detail.latLng)==null?void 0:m.lng)},onClick:p=>{var g,m;console.log(p.detail.latLng),a((g=p.detail.latLng)==null?void 0:g.lat),d((m=p.detail.latLng)==null?void 0:m.lng)},children:e&&e.map((p,g)=>{const m={lat:Number(p.Latitud),lng:Number(p.Longitud)};return y.jsx(Gt,{position:m},p.Nombre+g)})})})]})}const nn=je(function({loaderData:e,actionData:n}){const{GOOGLE_MAPS_API_KEY:o}=e;return y.jsx(Vt,{API_KEY:o,actionData:n})});export{nn as default};
